# 右键菜单功能说明

## 概述

本应用在文件夹列表和笔记列表中添加了右键菜单功能，提供更便捷的操作方式。

## 文件夹列表右键菜单

### 在文件夹上点击右键

当在自定义文件夹上点击右键时，会显示以下菜单选项：

1. **新建笔记** - 在当前文件夹中创建新笔记
2. **新建文件夹** - 创建一个新的文件夹（注：当前版本不支持文件夹层级，新建的是顶级文件夹）
3. **重命名文件夹** - 修改当前文件夹的名称
4. **删除文件夹** - 删除当前文件夹（文件夹中的笔记会移动到"所有笔记"）

### 在空白区域点击右键

当在文件夹列表的空白区域点击右键时，只显示：

1. **新建文件夹** - 创建一个新的顶级文件夹

### 注意事项

- 系统文件夹（如"所有笔记"、"最近删除"）不支持右键菜单操作
- 标签项保留原有的右键菜单功能（重命名和删除）

## 笔记列表右键菜单

### 在笔记上点击右键

当在笔记项上点击右键时，会显示以下菜单选项：

1. **新建笔记** - 在当前文件夹中创建新笔记
2. **重命名笔记** - 修改笔记的标题
3. **删除笔记** - 删除当前笔记

### 在空白区域点击右键

当在笔记列表的空白区域点击右键时，只显示：

1. **新建笔记** - 在当前文件夹中创建新笔记

## 工具栏变更

- **已移除**：工具栏中的"🗑️ 删除"按钮
- **原因**：删除功能已整合到右键菜单中，使界面更简洁
- **替代方案**：
  - 使用右键菜单删除笔记
  - 使用快捷键 `Ctrl+D` 删除当前笔记（保留）

## 快捷键

以下快捷键仍然可用：

- `Ctrl+N` - 新建笔记
- `Ctrl+Shift+N` - 新建文件夹
- `Ctrl+D` - 删除当前笔记（虽然工具栏按钮已移除）

## 使用建议

1. **快速操作**：右键菜单提供了最快捷的操作方式，无需移动鼠标到工具栏
2. **批量管理**：在文件夹列表中可以快速重命名和删除多个文件夹
3. **笔记整理**：在笔记列表中可以快速重命名笔记，便于整理笔记结构

## 功能演示

### 文件夹操作流程

```
1. 在文件夹列表中找到目标文件夹
2. 右键点击文件夹
3. 选择需要的操作（新建/重命名/删除）
4. 按照提示完成操作
```

### 笔记操作流程

```
1. 在笔记列表中找到目标笔记
2. 右键点击笔记
3. 选择需要的操作（新建/重命名/删除）
4. 按照提示完成操作
```

## 技术实现

- 使用 PyQt6 的 `CustomContextMenu` 策略
- 通过 `customContextMenuRequested` 信号触发菜单显示
- 菜单项使用 `QAction` 实现，支持图标和快捷键
- 根据点击位置动态生成菜单内容

## 未来改进

1. 支持文件夹层级结构（子文件夹）
2. 支持拖拽移动笔记到不同文件夹
3. 支持批量操作（多选删除、移动等）
4. 添加更多右键菜单选项（如复制、移动等）
