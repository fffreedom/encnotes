# 🎉 新功能发布 - v2.0.0

## 重大更新：导出和iCloud同步功能

我们很高兴地宣布，数学笔记应用迎来了v2.0.0重大更新！本次更新新增了**导出功能**和**iCloud同步功能**，让你的笔记管理更加便捷和安全。

---

## 📤 导出功能

### 支持4种导出格式

#### 1. PDF导出 📄
- **用途**：打印、分享、存档
- **特点**：
  - ✅ 高质量输出
  - ✅ 保留所有格式
  - ✅ 完美显示数学公式
  - ✅ 无需额外依赖
- **快捷键**：`Ctrl+Shift+P`

#### 2. Word导出 📝
- **用途**：继续编辑、协作
- **特点**：
  - ✅ .docx格式
  - ✅ 可在Microsoft Word中编辑
  - ✅ 保留基本格式
  - ⚠️ 需要安装额外库
- **快捷键**：`Ctrl+Shift+W`

#### 3. Markdown导出 📋
- **用途**：跨平台、版本控制
- **特点**：
  - ✅ 纯文本格式
  - ✅ 跨平台兼容
  - ✅ 适合Git管理
  - ✅ 数学公式转为LaTeX代码
  - ⚠️ 需要安装额外库
- **快捷键**：`Ctrl+Shift+M`

#### 4. HTML导出 🌐
- **用途**：网页查看、发布
- **特点**：
  - ✅ 浏览器查看
  - ✅ 保留所有格式
  - ✅ 美观的样式
  - ✅ 无需额外依赖

### 导出位置

所有导出文件统一保存在：
```
~/Documents/MathNotes导出/
```

文件命名格式：`笔记标题_时间戳.扩展名`

### 快速访问

点击菜单"文件" → "导出" → "打开导出文件夹"，一键打开导出目录。

---

## ☁️ iCloud同步功能

### 多设备无缝同步

现在你可以在多台Mac设备之间自动同步笔记，无需手动备份和传输！

### 核心特性

#### 1. 启用/禁用同步
- 灵活控制同步状态
- 使用系统级iCloud Drive
- 无需额外配置

#### 2. 立即同步
- **快捷键**：`Ctrl+S`
- 手动触发上传
- 实时反馈同步状态

#### 3. 从iCloud拉取
- 下载远程笔记
- 智能合并数据
- 自动解决冲突

#### 4. 自动同步
- 每5分钟自动同步
- 关闭应用时同步
- 后台静默运行

#### 5. 同步状态
- 实时查看同步信息
- 显示上次同步时间
- 检查iCloud可用性

### 工作原理

```
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│   Mac A     │         │   iCloud    │         │   Mac B     │
│             │         │   Drive     │         │             │
│  创建笔记    │ ──上传──▶│             │◀──拉取── │  获取笔记    │
│             │         │  同步存储    │         │             │
│  自动同步    │◀──下载── │             │ ──推送──▶│  自动同步    │
└─────────────┘         └─────────────┘         └─────────────┘
```

### 智能冲突处理

当本地和iCloud都有修改时：
1. 自动比较更新时间
2. 保留较新的版本
3. 不会丢失数据

### 安全可靠

- ✅ 使用Apple官方iCloud Drive
- ✅ 数据传输加密
- ✅ 只有你的账户可访问
- ✅ 不上传到第三方服务器

---

## 🚀 如何使用

### 导出笔记

1. 在笔记列表中选择要导出的笔记
2. 使用以下方式之一：
   - 点击菜单"文件" → "导出" → 选择格式
   - 使用快捷键（见上文）
3. 导出完成后选择是否打开文件

### 启用iCloud同步

1. 确保已在系统设置中登录iCloud
2. 点击菜单"同步" → "启用iCloud同步"
3. 系统会自动检查iCloud可用性
4. 启用成功后，应用会自动同步

### 在多台设备间同步

**设备A（首次设置）**：
1. 启用iCloud同步
2. 点击"立即同步"上传笔记

**设备B（首次设置）**：
1. 安装应用
2. 启用iCloud同步
3. 点击"从iCloud拉取"获取笔记

**后续使用**：
- 两台设备都会自动同步
- 无需手动操作

---

## 📦 安装新依赖

### 完整功能（推荐）

安装所有依赖以使用全部功能：

```bash
pip install -r requirements.txt
```

### 按需安装

如果只需要特定功能：

**Word导出**：
```bash
pip install python-docx beautifulsoup4
```

**Markdown导出**：
```bash
pip install html2text beautifulsoup4
```

**PDF和HTML导出**：无需额外依赖

**iCloud同步**：无需额外依赖

---

## 🎯 使用场景

### 场景1：学生做笔记
- 在课堂上用Mac记笔记
- 回家后在另一台Mac上复习
- 通过iCloud自动同步
- 考试前导出为PDF打印

### 场景2：研究人员写论文
- 记录研究想法和公式
- 导出为Markdown用于版本控制
- 导出为Word与同事协作
- 最终导出为PDF发表

### 场景3：教师备课
- 准备教学材料
- 插入数学公式
- 导出为PDF分发给学生
- 在办公室和家里同步

### 场景4：工程师记录
- 记录技术笔记
- 导出为Markdown发布到博客
- 多台设备同步
- 导出为HTML在线查看

---

## 📊 功能对比

| 功能 | v1.0.0 | v2.0.0 |
|------|--------|--------|
| 基础笔记 | ✅ | ✅ |
| LaTeX公式 | ✅ | ✅ |
| MathML公式 | ✅ | ✅ |
| 导出PDF | ❌ | ✅ |
| 导出Word | ❌ | ✅ |
| 导出Markdown | ❌ | ✅ |
| 导出HTML | ❌ | ✅ |
| iCloud同步 | ❌ | ✅ |
| 自动同步 | ❌ | ✅ |
| 冲突处理 | ❌ | ✅ |

---

## 🎓 快速开始

### 5分钟上手新功能

1. **更新依赖**（1分钟）
   ```bash
   pip install -r requirements.txt
   ```

2. **启用同步**（1分钟）
   - 打开应用
   - 点击"同步" → "启用iCloud同步"

3. **创建笔记**（1分钟）
   - 创建一篇测试笔记
   - 输入一些内容和公式

4. **导出测试**（1分钟）
   - 按 `Ctrl+Shift+P` 导出为PDF
   - 查看导出效果

5. **同步测试**（1分钟）
   - 按 `Ctrl+S` 立即同步
   - 查看同步状态

---

## 💡 使用技巧

### 导出技巧

1. **选择合适的格式**
   - 需要打印 → PDF
   - 需要编辑 → Word
   - 需要版本控制 → Markdown
   - 需要网页查看 → HTML

2. **批量导出**
   - 虽然暂不支持批量导出
   - 但可以快速连续导出多个笔记
   - 使用快捷键提高效率

3. **文件管理**
   - 定期清理导出文件夹
   - 重要文件及时备份
   - 使用有意义的笔记标题

### 同步技巧

1. **首次使用**
   - 在主设备上先创建笔记
   - 然后在其他设备上拉取

2. **避免冲突**
   - 不要同时在多台设备上编辑
   - 编辑前先拉取最新版本

3. **定期检查**
   - 每周查看一次同步状态
   - 确保同步正常工作

4. **双重保险**
   - 虽然有iCloud同步
   - 但重要笔记建议导出备份

---

## 🐛 已知问题

### 导出相关
- Word导出时数学公式可能显示为文本
- Markdown导出时复杂格式可能丢失

### 同步相关
- 首次同步可能需要几秒钟
- 大量笔记同步时间较长

### 解决方案
- 这些问题会在后续版本中改进
- 如遇到问题请查看文档或提交Issue

---

## 📞 获取帮助

### 文档资源
- 📖 [README.md](README.md) - 完整功能说明
- 🚀 [QUICKSTART.md](QUICKSTART.md) - 快速开始
- 📤 [EXPORT_SYNC_GUIDE.md](EXPORT_SYNC_GUIDE.md) - 详细指南
- 💡 [EXAMPLES.md](EXAMPLES.md) - 使用示例
- 📝 [CHANGELOG.md](CHANGELOG.md) - 更新日志

### 常见问题
- 查看 README.md 中的"常见问题"部分
- 查看 EXPORT_SYNC_GUIDE.md 中的详细说明

### 反馈渠道
- GitHub Issues
- 邮件反馈

---

## 🙏 致谢

感谢所有用户的支持和反馈！

本次更新是根据用户需求开发的，希望能让你的笔记体验更加完美。

---

## 🎊 开始使用

现在就更新到v2.0.0，体验全新的导出和同步功能吧！

```bash
cd /Users/danahan/project/notes
git pull  # 如果使用Git
pip install -r requirements.txt
python3 main.py
```

---

**让笔记管理更简单，让知识同步更便捷！** 📝☁️✨
